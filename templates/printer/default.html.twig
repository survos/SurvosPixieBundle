{# templates/bundles/SurvosPixieBundle/printer/default.html.twig #}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ pixieCode|title }} - {{ core|title }} Labels</title>
    <style>
        @page {
            margin: 0.5in;
            size: letter;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.4;
        }

        .labels-container {
            display: grid;
            grid-template-columns: repeat({{ columns }}, 1fr);
            gap: 0.5in;
            padding: 0.25in;
        }

        .label {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 0.25in;
            break-inside: avoid;
            page-break-inside: avoid;
            min-height: 2in;
            background: white;
        }

        .label-header {
            border-bottom: 1px solid #eee;
            margin-bottom: 8px;
            padding-bottom: 4px;
        }

        .label-id {
            font-weight: bold;
            font-size: 14px;
            color: #333;
        }

        .label-title {
            font-size: 16px;
            font-weight: 600;
            margin: 8px 0 4px 0;
            color: #000;
        }

        .label-description {
            font-size: 12px;
            color: #666;
            margin: 4px 0;
        }

        .label-metadata {
            font-size: 10px;
            color: #888;
            margin-top: 8px;
            border-top: 1px dotted #ddd;
            padding-top: 4px;
        }

        .label-field {
            margin: 2px 0;
        }

        .field-label {
            font-weight: 600;
            display: inline-block;
            min-width: 60px;
        }

        @media print {
            .no-print { display: none !important; }
            body { print-color-adjust: exact; }
        }

        /* Navigation styles for web view */
        .navigation {
            position: sticky;
            top: 0;
            background: #f8f9fa;
            padding: 1rem;
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 1rem;
        }

        .nav-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: 1px solid #dee2e6;
            background: white;
            text-decoration: none;
            border-radius: 4px;
            color: #495057;
        }

        .btn:hover {
            background: #f8f9fa;
        }

        .btn-primary {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
    </style>
</head>
<body>
{% if format != 'pdf' %}
    <div class="navigation no-print">
        <div class="nav-controls">
            <strong>{{ pixieCode|title }} {{ core|title }} Labels</strong>

            <span>{{ rows|length }} of {{ total }} items</span>

            {% if pagination.hasPrev %}
                <a href="?{{ app.request.queryString|merge({'offset': pagination.prevOffset}) }}" class="btn">← Previous</a>
            {% endif %}

{#            {% if pagination.hasNext %}#}
{#                <a href="?{{ app.request.queryString|merge({'offset': pagination.nextOffset}) }}" class="btn">Next →</a>#}
{#            {% endif %}#}

{#            <a href="?{{ app.request.queryString|merge({'format': 'pdf'}) }}" class="btn">PDF</a>#}
{#            <a href="{{ path('pixie_printer_preview', {pixieCode: pixieCode, core: core}) }}" class="btn">Templates</a>#}

            <button onclick="window.print()" class="btn btn-primary">Print</button>
        </div>
    </div>
{% endif %}

<div class="labels-container">
    {% for row in rows %}
        <div class="label" data-id="{{ row.idWithinCore }}">
            <div class="label-header">
                <div class="label-id">{{ row.idWithinCore }}</div>
            </div>

            <div class="label-title">
                {{ row.rawLabel }}
            </div>

            {% if row.data.description %}
                <div class="label-description">
                    {{ row.data.description|slice(0, 200) }}{% if row.data.description|length > 200 %}...{% endif %}
                </div>
            {% endif %}

            <div class="label-metadata">
                {% for field, value in row.data %}
                    {% if field not in ['label', 'description', 'id'] and value %}
                        <div class="label-field">
                            <span class="field-label">{{ field|title }}:</span>
                            {{ value is iterable ? value|join(', ') : value }}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    {% endfor %}
</div>
</body>
</html>

{# templates/bundles/SurvosPixieBundle/printer/museum-label.html.twig #}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ pixieCode|title }} Museum Labels</title>
    <style>
        @page {
            margin: 0.5in;
            size: letter;
        }

        body {
            font-family: 'Times New Roman', serif;
            margin: 0;
            padding: 0;
            line-height: 1.3;
        }

        .labels-container {
            display: grid;
            grid-template-columns: repeat({{ columns }}, 1fr);
            gap: 0.75in;
            padding: 0.5in;
        }

        .museum-label {
            border: 2px solid #8B4513;
            padding: 0.4in;
            background: #FEFEFE;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            break-inside: avoid;
            page-break-inside: avoid;
            min-height: 3in;
        }

        .museum-header {
            text-align: center;
            border-bottom: 1px solid #8B4513;
            margin-bottom: 12px;
            padding-bottom: 8px;
        }

        .museum-name {
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #8B4513;
        }

        .object-title {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            margin: 12px 0 8px 0;
            color: #2C1810;
        }

        .object-details {
            font-size: 12px;
            margin: 6px 0;
            text-align: justify;
        }

        .object-id {
            font-size: 10px;
            color: #666;
            text-align: center;
            margin-top: 12px;
            font-family: monospace;
        }

        .culture-date {
            font-style: italic;
            text-align: center;
            margin: 8px 0;
            font-size: 11px;
            color: #444;
        }

        .material-info {
            font-size: 10px;
            color: #555;
            margin: 4px 0;
        }

        @media print {
            .no-print { display: none !important; }
            body { print-color-adjust: exact; }
        }
    </style>
</head>
<body>
{% if format != 'pdf' %}
    <div class="navigation no-print" style="background: #f5f5f5; padding: 1rem; margin-bottom: 1rem;">
        <strong>Museum Label Format</strong> - {{ rows|length }} items
        <button onclick="window.print()" style="float: right;">Print Labels</button>
    </div>
{% endif %}

<div class="labels-container">
    {% for row in rows %}
        <div class="museum-label">
            <div class="museum-header">
                <div class="museum-name">
                    {{ owner.label|default(pixieCode|title) }}
                </div>
            </div>

            <div class="object-title">
                {{ row.data.title|default(row.label)|default('Untitled Object') }}
            </div>

{#            {% if row.data.culture or row.data.time or row.data.epoch %}#}
{#                <div class="culture-date">#}
{#                    {% if row.data.culture %}{{ row.data.culture }}{% endif %}#}
{#                    {% if row.data.time %} • {{ row.data.time }}{% endif %}#}
{#                    {% if row.data.epoch %} • {{ row.data.epoch }}{% endif %}#}
{#                </div>#}
{#            {% endif %}#}

            {% if row.data.description %}
                <div class="object-details">
                    {{ row.data.description|slice(0, 300) }}{% if row.data.description|length > 300 %}...{% endif %}
                </div>
            {% endif %}

{#            {% if row.data.material or row.data.mat %}#}
{#                <div class="material-info">#}
{#                    <strong>Material:</strong> {{ row.data.material|default(row.data.mat) }}#}
{#                </div>#}
{#            {% endif %}#}

{#            {% if row.data.dimensions %}#}
{#                <div class="material-info">#}
{#                    <strong>Dimensions:</strong> {{ row.data.dimensions }}#}
{#                </div>#}
{#            {% endif %}#}

            <div class="object-id">
                {{ row.data.code|default(row.idWithinCore) }}
            </div>
        </div>
    {% endfor %}
</div>
</body>
</html>

{# templates/bundles/SurvosPixieBundle/printer/compact.html.twig #}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ pixieCode|title }} - Compact Labels</title>
    <style>
        @page { margin: 0.25in; size: letter; }

        body {
            font-family: Arial, sans-serif;
            font-size: 10px;
            margin: 0;
            padding: 0;
            line-height: 1.2;
        }

        .labels-container {
            display: grid;
            grid-template-columns: repeat({{ columns|default(3) }}, 1fr);
            gap: 0.125in;
            padding: 0.125in;
        }

        .compact-label {
            border: 1px solid #999;
            padding: 0.125in;
            break-inside: avoid;
            min-height: 1in;
            background: white;
        }

        .compact-title {
            font-weight: bold;
            font-size: 11px;
            margin-bottom: 2px;
        }

        .compact-id {
            font-family: monospace;
            font-size: 9px;
            color: #666;
        }

        .compact-desc {
            font-size: 9px;
            margin: 2px 0;
            line-height: 1.1;
        }
    </style>
</head>
<body>
<div class="labels-container">
    {% for row in rows %}
        {{ dump(row) }}
        <div class="compact-label">
            <div class="compact-title">{{ row.label|default('Item')|slice(0, 50) }}</div>
            <div class="compact-id">{{ row.idWithinCore }}</div>
            {% if row.data.description %}
                <div class="compact-desc">{{ row.data.description|slice(0, 80) }}</div>
            {% endif %}
        </div>
    {% endfor %}
</div>
</body>
</html>

{# templates/bundles/SurvosPixieBundle/printer/preview.html.twig #}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Label Templates - {{ pixieCode|title }}</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 2rem;
            background: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 8px;
        }
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }
        .template-card {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            background: #f8f9fa;
        }
        .template-preview {
            border: 1px solid #ddd;
            height: 200px;
            margin: 1rem 0;
            background: white;
            padding: 0.5rem;
            font-size: 8px;
            overflow: hidden;
        }
        .btn {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin: 0.25rem;
        }
        .form-group {
            margin: 1rem 0;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        input, select {
            padding: 0.5rem;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Label Templates for {{ pixieCode|title }} - {{ core|title }}</h1>

    <div class="form-group">
        <h3>Print Options</h3>
        <form method="get" action="{{ path('pixie_printer_labels', {pixieCode: pixieCode, core: core}) }}">
            <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: end;">
                <div>
                    <label>Template:</label>
                    <select name="template">
                        <option value="default">Default</option>
                        <option value="museum-label">Museum Label</option>
                        <option value="compact">Compact</option>
                    </select>
                </div>

                <div>
                    <label>Limit:</label>
                    <input type="number" name="limit" value="20" min="1" max="1000">
                </div>

                <div>
                    <label>Columns:</label>
                    <input type="number" name="columns" value="2" min="1" max="4">
                </div>

                <div>
                    <label>Search:</label>
                    <input type="text" name="search" placeholder="Filter items...">
                </div>

                <div>
                    <label>Specific IDs:</label>
                    <input type="text" name="ids" placeholder="1,2,3...">
                </div>

                <button type="submit" class="btn">Generate Labels</button>
            </div>
        </form>
    </div>

    <div class="template-grid">
        <div class="template-card">
            <h3>Default Template</h3>
            <p>Standard layout with ID, title, description and metadata fields.</p>
            <div class="template-preview">
                {% if sampleRow|default(false) %}
                    <div style="border: 1px solid #ddd; padding: 4px; margin: 2px;">
                        <strong>{{ sampleRow.idWithinCore }}</strong><br>
                        <div style="font-weight: bold; margin: 2px 0;">{{ sampleRow.label|default('Sample Title') }}</div>
                        <div style="font-size: 6px; color: #666;">Sample description text...</div>
                    </div>
                {% endif %}
            </div>
            <a href="{{ path('pixie_printer_labels', {pixieCode: pixieCode, core: core, template: 'default'}) }}" class="btn">Use Template</a>
        </div>

        <div class="template-card">
            <h3>Museum Label</h3>
            <p>Professional museum-style labels with cultural context and formal presentation.</p>
            <div class="template-preview">
                {% if sampleRow|default(false) %}
                    <div style="border: 2px solid #8B4513; padding: 6px; margin: 2px; background: #FEFEFE;">
                        <div style="text-align: center; font-size: 6px; text-transform: uppercase; margin-bottom: 2px;">{{ pixieCode|title }}</div>
                        <div style="font-weight: bold; text-align: center; margin: 2px 0;">{{ sampleRow.label|default('Object Title') }}</div>
                        <div style="font-style: italic; text-align: center; font-size: 6px;">Culture • Period</div>
                    </div>
                {% endif %}
            </div>
            <a href="{{ path('pixie_printer_labels', {pixieCode: pixieCode, core: core, template: 'museum-label'}) }}" class="btn">Use Template</a>
        </div>

        <div class="template-card">
            <h3>Compact</h3>
            <p>Minimal space usage for inventory or reference purposes.</p>
            <div class="template-preview">
                {% if sampleRow|default(false) %}
                    <div style="border: 1px solid #999; padding: 2px; margin: 1px; font-size: 6px;">
                        <strong>{{ sampleRow.label|default('Title')|slice(0, 20) }}</strong><br>
                        <span style="font-family: monospace;">{{ sampleRow.idWithinCore }}</span>
                    </div>
                {% endif %}
            </div>
            <a href="{{ path('pixie_printer_labels', {pixieCode: pixieCode, core: core, template: 'compact'}) }}" class="btn">Use Template</a>
        </div>
    </div>

    {% if sampleRow %}
        <div style="margin-top: 2rem; padding: 1rem; background: #e9ecef; border-radius: 4px;">
            <h4>Sample Data Fields Available:</h4>
            <div style="font-family: monospace; font-size: 12px;">
                {% for field, value in sampleRow.data %}
                    <div><strong>{{ field }}:</strong> {{ value is iterable ? value|join(', ') : value|slice(0, 50) }}{% if value|length > 50 %}...{% endif %}</div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
</div>
</body>
</html>